#summary Guide about web services call in Neptune mobile application
#labels HowTo,Change,WebService

= How to Change the Web Service =
In this Wiki, we will focus more about how to change the Web Service calls in NEPTUNE mobile application.
 
All web services that are being called are saved in "services.xml" resource file:
 
<p>_<NEPTUNEApp Project>/res/values/services.xml_
 
<p>The services that NEPTUNE is calling are:
<p>
 # DMAS Last Reading service
  * *Resource ID* : last_reading_service
  * *Service Call* : http://dmas.uvic.ca/LastReading
  * *Parameter* : N/A 	
  * *Return* : Result of this service call is in JSON format.<br/>Example of the result:<br/>
  <code>
        {
	    "devices": [
	        {
	            "deviceId": 11102, // required
	            "deviceName": "WET Labs Fluorometer (analog)",
	            "filename": null,
	            "sensors": [
	                {
	                    "correctedValue": "0.118",
	                    "sampleTime": "2011-02-03T17:48:25.533Z",
	                    "sensorId": 121,
	                    "sensorName": "Turbidity",
	                    "unitOfMeasure": "NTU"
	                },
	                {
	                    "correctedValue": "0.087",
	                    "sampleTime": "2011-02-03T17:48:25.533Z",
	                    "sensorId": 120,
	                    "sensorName": "Chlorophyll",
	                    "unitOfMeasure": "ug/l"
	                }
	            ],
	            "sites": [
	                {
	                    "dateFrom": "2007-01-01T00:00:00.000Z",
	                    "depth": -20.0,
	                    "latitude": 48.6492194,
	                    "location": "NEPTUNE offices",
	                    "longitude": -123.4462056
	                },
	                {
	                    "dateFrom": "2009-09-10T18:45:24.000Z",
	                    "depth": 899.5,
	                    "latitude": 48.314925,
	                    "location": "Barkley Canyon",
	                    "longitude": -126.058022
	                },
	                {
	                    "dateFrom": "2010-05-10T21:58:13.000Z",
	                    "depth": 0.0,
	                    "latitude": 0.0,
	                    "location": "Port Alberni",
	                    "longitude": 0.0
	                },
	                {
	                    "dateFrom": "2010-05-16T07:34:48.000Z",
	                    "depth": 896.3,
	                    "latitude": 48.314912,
	                    "location": "Barkley Canyon",
	                    "longitude": -126.058008
	                }
	            ],
	            "status": null,
	            "streamerAddress": null
	        },
	        {
	            "deviceId": 12116,
	            "deviceName": "WET Labs CDOM Fluorometer",
	            "filename": null,
	            "sensors": [
	                {
	                    "correctedValue": "7.2036",
	                    "sampleTime": "2010-09-15T19:35:58.894Z",
	                    "sensorId": 4266,
	                    "sensorName": "CDOM",
	                    "unitOfMeasure": "ppb QSDE"
	                }
	            ],
	            "sites": [
	                {
	                    "dateFrom": "2007-01-01T00:00:00.000Z",
	                    "depth": -20.0,
	                    "latitude": 48.6492194,
	                    "location": "NEPTUNE offices",
	                    "longitude": -123.4462056
	                },
	                {
	                    "dateFrom": "2009-08-25T09:30:00.000Z",
	                    "depth": 396.0,
	                    "latitude": 48.4272533333,
	                    "location": "Barkley Canyon",
	                    "longitude": -126.174095
	                },
	                {
	                    "dateFrom": "2010-05-14T23:03:57.000Z",
	                    "depth": -20.0,
	                    "latitude": 48.6492194,
	                    "location": "NEPTUNE offices",
	                    "longitude": -123.4462056
	                },
	                {
	                    "dateFrom": "2010-09-13T20:09:00.000Z",
	                    "depth": 396.0,
	                    "latitude": 48.4273866667,
	                    "location": "Barkley Canyon",
	                    "longitude": -126.1741316667
	                },
	                {
	                    "dateFrom": "2010-10-05T17:51:14.000Z",
	                    "depth": -20.0,
	                    "latitude": 48.6492194,
	                    "location": "NEPTUNE offices",
	                    "longitude": -123.4462056
	                }
	            ],
	            "status": null,
	            "streamerAddress": null
		        }
		    ]
		}
</code><br/>All the fields are required in order to build the SQLite database in NEPTUNE application.<br/>
 # DMAS plotting service
  * *Resource ID* : plot_service
  * *Service Call* : http://dmas.uvic.ca/Plot?sensorId=%1$s&plotwidth=%2$d&plotheight=%3$d&plottype=on&plottitle=on&datefrom=%4$tY-%4$tm-%4$td%%20%4$tH:%4$tM:%4$tS&dateto=%5$tY-%5$tm-%5$td%%20%5$tH:%5$tM:%5$tS
  * *Parameters* : 
   * sensorId = Sensor ID
   * plotwidth = Width of the screen size
   * plotheight = Height of the screen size
   * datefrom = Date and time (yyyy-mm-dd hh:mm:ss) the graph to plot from
   * dateto = Date and time (yyyy-mm-dd hh:mm:ss) the graph to plot until
  * *Return* : A graph image in PNG format with the width and height defined in the request.<br/>
 # YouTube API
  * *Resource ID* : youtube_service
  * *Service Call* : http://gdata.youtube.com/feeds/mobile/videos/-/mobile?&author=neptunecanada&format=6&alt=json&orderby=published
  * *Parameters* : As defined in the service call.
  * *Return* : List of video stream information in JSON format. Please refer to the follow URLs for more information of the return format:<br/>http://code.google.com/apis/youtube/2.0/developers_guide_protocol.html#Understanding_Video_Entries<br/>http://code.google.com/apis/gdata/docs/json.html